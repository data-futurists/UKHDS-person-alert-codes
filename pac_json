{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Person Alert Data Schema",
  "type": "object",
  "properties": {
    "PersonAlertCodes": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "AlertCodeID",
          "AlertCode",
          "AlertSubcode",
          "AlertName",
          "AlertSubName",
          "AlertCategory",
          "IsCritical",
          "IsAwaabRelevant",
          "RepairsImpact",
          "SupportRequired"
        ],
        "properties": {
          "AlertCodeID": {
            "type": "string",
            "format": "uuid"
          },
          "AlertCode": {
            "type": "string",
            "maxLength": 10
          },
          "AlertSubcode": {
            "type": "string",
            "maxLength": 20
          },
          "AlertName": {
            "type": "string",
            "maxLength": 100
          },
          "AlertSubName": {
            "type": "string",
            "maxLength": 100
          },
          "AlertCategory": {
            "type": "string",
            "enum": ["Health", "Risk", "Safeguarding", "Vulnerability", "Communication", "Environmental"]
          },
          "IsCritical": {
            "type": "boolean"
          },
          "IsAwaabRelevant": {
            "type": "boolean"
          },
          "RepairsImpact": {
            "type": "string",
            "enum": ["High", "Medium", "Low", "None"]
          },
          "SupportRequired": {
            "type": "string"
          }
        }
      }
    },
    "PersonAlert": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "PersonAlertID",
          "PersonID",
          "AlertCodeID",
          "StartDate",
          "Active"
        ],
        "properties": {
          "PersonAlertID": {
            "type": "string",
            "format": "uuid"
          },
          "PersonID": {
            "type": "string",
            "format": "uuid"
          },
          "AlertCodeID": {
            "type": "string",
            "format": "uuid"
          },
          "AlertDescription": {
            "type": "string"
          },
          "AlertSource": {
            "type": "string",
            "maxLength": 100
          },
          "InformedResident": {
            "type": "boolean",
            "default": false
          },
          "StartDate": {
            "type": "string",
            "format": "date"
          },
          "EndDate": {
            "type": "string",
            "format": "date"
          },
          "ReviewDate": {
            "type": "string",
            "format": "date"
          },
          "Active": {
            "type": "boolean",
            "default": true
          },
          "CreatedBy": {
            "type": "string",
            "maxLength": 100
          },
          "LastUpdated": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    }
  },
  "required": ["PersonAlertCodes", "PersonAlert"]
}
